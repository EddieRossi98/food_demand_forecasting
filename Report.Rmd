---
title: "BEFD Project"
output: beamer_presentation
theme: "Berlin"
colortheme: "beaver"
fonttheme: "professionalfonts"
header-includes:
  - \setbeamercolor{structure}{fg=darkred}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
library(knitr)
centers = read.csv("data/fulfilment_center_info.csv")
meals = read.csv("data/meal_info.csv")
sales = read.csv("data/train.csv")
#prova r con git!!!!!
```

# Food Demand Forecasting

## **The business problem:**

A meal delivery company operates in multiple cities. They have various fulfillment centers in these cities for dispatching meal orders to their customers. We need to provide these centers the demand forecasting for upcoming weeks so that these centers will plan the stock of raw materials accordingly.

## **Task:**

Predict the demand for the next 10 weeks!

# Data sources

## Datasets

- Fulfilment center data
- Meal info data
- Sales historical data

# Fulfilment centers data features

## ***Variables:***

- **center_id**: Fulfilment identifier
- **city_code**: City id in which the center is located on
- **region_code**: Region id in which the center is located on
- **center_type**: Type of the center
- **op_area**: Size of the operational area

# Fulfilment centers data features summary

## ***Variables:***

- **center_id**: We have 
```{r, echo = F, results = 'asis'}
cat(length(unique(centers$center_id)))
```
different centers
- **city_code**: The company acts on
```{r, echo = F, results = 'asis'}
cat(length(unique(centers$city_code)))
```
different cities

# Fulfilment centers data features summary

**region_code**: These cities are located on
```{r, echo = F, results = 'asis'}
cat(length(unique(centers$region_code)))
```
different regions
```{r, echo = F, out.width="80%", fig.align='center'}
heights = rep(0,8)
names = levels(factor(centers$region_code))
for (i in 1:8) {
  heights[i] = sum(centers[, "region_code"] == names[i])
}
names = paste("Region", names)
heights = heights/nrow(centers)
barplot(names = names , height = heights, 
        col = c("darkred"),
        xlab = "Location",
        main = "Barplot")
```


# Fulfilment centers data features summary

**center_type**: There are
```{r, echo = F, results = 'asis'}
cat(length(unique(centers$center_type)))
```
centers types: A, B and C
```{r, echo = F, out.width="80%", fig.align='center'}
heights = c(0,0,0)
names = c("A", "B", "C")
for (i in 1:3) {
  heights[i] = sum(centers[, "center_type"] == paste("TYPE_", names[i], sep = ""))
}
heights = heights/nrow(centers)
barplot(names = names , height = heights, 
        col = c("darkred"),
        xlab = "Centers type",
        main = "Barplot")
```

# Fulfilment centers data features summary

- **op_area**:
```{r, echo = F, out.width="80%", fig.align='center'}
hist(centers$op_area, col = "darkred", border = "white",
     xlab = "Operational area size", main = "Histogram", 
     breaks = 7, probability = T)
```


# Fulfilment centers data rows

```{r, echo = F}
kable(head(centers), "pipe")
```

# Meal info

```{r, echo = F}
kable(head(meals), "pipe")
```

# Sales data

```{r, echo = F}
kable(head(sales[, c(1:5)]))
```

# Sales data

```{r, echo = F}
kable(head(sales[, c(1, 6,9)]))
```

# Correlations

```{r, echo = F}
X = merge(sales, centers, by = "center_id")
X = merge(X, meals,by = "meal_id")
corr = cor(X[, c(4,5,6,9,13)])
```
```{r, echo = F, out.width="80%", fig.align='center'}
library(ggplot2)
library(ggcorrplot)
ggcorrplot(corr, hc.order = TRUE, outline.col = "white", 
           colors = c("blue", "white", "darkred"), lab = TRUE) +
  ggtitle("Correlations between numerical variables")
```
